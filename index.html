<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SCFHS Pass Prediction Engine</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f8;
  margin: 0;
}
.container {
  max-width: 900px;
  margin: auto;
  background: #ffffff;
  padding: 20px;
  min-height: 100vh;
}
h1, h2 {
  text-align: center;
}
.hidden { display: none; }

input, button {
  padding: 10px;
  margin: 6px 0;
  width: 100%;
  font-size: 16px;
}

#timer {
  text-align: center;
  font-weight: bold;
  font-size: 18px;
  margin-bottom: 10px;
  color: #1f2937;
}

.option {
  border: 1px solid #ccc;
  padding: 10px;
  margin-top: 8px;
  cursor: pointer;
}
.option:hover { background: #eef2f5; }
.option.selected { background: #d9e8ff; }
.option.correct { border-left: 6px solid green; }
.option.wrong { border-left: 6px solid red; }

.rationale {
  background: #f9fafb;
  border: 1px solid #ccc;
  padding: 15px;
  margin-top: 15px;
}

.report {
  background: #f1f5f9;
  padding: 20px;
  margin-top: 20px;
}
</style>
</head>

<body>
<div class="container">

<!-- START SCREEN -->
<div id="startScreen">
  <h1>SCFHS Pass Prediction Test</h1>
  <input type="text" id="candidateName" placeholder="Full Name">
  <input type="text" id="candidateID" placeholder="Candidate ID">
  <button onclick="startExam()">Start Test</button>
</div>

<!-- EXAM SCREEN -->
<div id="examScreen" class="hidden">
  <h2 id="qCounter"></h2>
  <div id="timer">Time Remaining: 120:00</div>
  <p id="questionText"></p>
  <div id="options"></div>

  <button onclick="submitAnswer()">Submit Answer</button>

  <div id="rationaleBox" class="rationale hidden"></div>
  <button id="nextBtn" class="hidden" onclick="nextQuestion()">Next Question</button>
</div>

<!-- RESULT SCREEN -->
<div id="resultScreen" class="hidden">
  <h1>PASS PREDICTION RESULT</h1>
  <div id="finalReport" class="report"></div>
</div>

</div>

<script>
// ================= QUESTIONS =================
const questions = [
{
  q: "An elderly patient becomes dizzy when moved from lying to standing position. BP drops from 130/78 to 96/60. What should the nurse technician do FIRST?",
  options: [
    { text: "Assist the patient back to a sitting position", tag: "SCFHS" },
    { text: "Encourage oral fluid intake", tag: "NCLEX" },
    { text: "Document orthostatic hypotension", tag: "SAFE_DELAY" },
    { text: "Notify the healthcare provider", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Immediate positioning prevents falls and injury caused by acute postural hypotension.",
    distractors: {
      NCLEX: "Hydration does not resolve immediate instability.",
      SAFE_DELAY: "Documentation does not protect patient safety.",
      STR: "Escalation follows stabilization."
    }
  }
},
{
  q: "1. A 43-year-old African American male is admitted with sickle cell anemia. The nurse plans to assess circulation in the lower extremities every two hours. Which of the following outcome criteria would the nurse use?",
  options: [
    { text: "Body temperature of 99Â°F or less", tag: "SAFE_DELAY" },
    { text: "Toes moved in active range of motion", tag: "STR" },
    { text: "Sensation reported when soles of feet are touched", tag: "NCLEX" },
    { text: "Capillary refill of < 3 seconds", tag: "SCFHS" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Capillary refill reflects peripheral perfusion and circulation, which is the priority assessment in sickle cell disease.",
    distractors: {
      SAFE_DELAY: "Temperature does not directly indicate lower extremity circulation.",
      STR: "Movement assesses motor function, not circulation.",
      NCLEX: "Sensation evaluates nerve function, not perfusion."
    }
  }
},
{
  q: "2. A 30-year-old male from Haiti is brought to the emergency department in sickle cell crisis. What is the best position for this client?",
  options: [
    { text: "Side-lying with knees flexed", tag: "STR" },
    { text: "Knee-chest", tag: "SAFE_DELAY" },
    { text: "High Fowlerâ€™s with knees flexed", tag: "SCFHS" },
    { text: "Semi-Fowlerâ€™s with legs extended on the bed", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "High Fowlerâ€™s improves oxygenation while flexed knees reduce venous pooling and pain during sickle cell crisis.",
    distractors: {
      STR: "Side-lying does not optimize oxygenation.",
      SAFE_DELAY: "Knee-chest position compromises ventilation.",
      NCLEX: "Leg extension can worsen venous stasis and pain."
    }
  }
},
{
  q: "3. A 25-year-old male is admitted in sickle cell crisis. Which of the following interventions would be of highest priority for this client?",
  options: [
    { text: "Taking hourly blood pressures with mechanical cuff", tag: "SAFE_DELAY" },
    { text: "Encouraging fluid intake of at least 200mL per hour", tag: "SCFHS" },
    { text: "Position in high Fowlerâ€™s with knee gatch raised", tag: "STR" },
    { text: "Administering Tylenol as ordered", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Aggressive hydration reduces blood viscosity and prevents further sickling, making it the priority intervention.",
    distractors: {
      SAFE_DELAY: "Monitoring alone does not treat the crisis.",
      STR: "Positioning supports care but does not correct the underlying issue.",
      NCLEX: "Pain control is important but secondary to hydration."
    }
  }
},
{
  q: "4. Which of the following foods would the nurse encourage the client in sickle cell crisis to eat?",
  options: [
    { text: "Steak", tag: "STR" },
    { text: "Cottage cheese", tag: "NCLEX" },
    { text: "Popsicle", tag: "SCFHS" },
    { text: "Lima beans", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Cold fluids such as popsicles promote hydration, which is essential during sickle cell crisis.",
    distractors: {
      STR: "High-protein foods do not address hydration needs.",
      NCLEX: "Dairy does not increase fluid intake significantly.",
      SAFE_DELAY: "Legumes do not provide immediate hydration."
    }
  }
},
{
  q: "5. A newly admitted client has sickle cell crisis and reports pain in the hands and feet. Pulse oximetry is 92%. Assuming all are ordered, which intervention should be done first?",
  options: [
    { text: "Adjust the room temperature", tag: "SAFE_DELAY" },
    { text: "Give a bolus of IV fluids", tag: "NCLEX" },
    { text: "Start oxygen therapy", tag: "SCFHS" },
    { text: "Administer meperidine (Demerol) 75mg IV push", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Oxygen therapy corrects hypoxia, which is a primary trigger of sickling and must be addressed immediately.",
    distractors: {
      SAFE_DELAY: "Environmental changes do not correct hypoxia.",
      NCLEX: "Fluids are important but oxygenation takes priority.",
      STR: "Pain management follows correction of hypoxia."
    }
  }
},
{
  q: "A post-cardiac surgery patient suddenly develops bright red drainage in chest tubes, hypotension, and tachycardia. What is PRIORITY?",
  options: [
    { text: "Assess for acute hemorrhage and notify physician immediately", tag: "SCFHS" },
    { text: "Clamp chest tubes to stop bleeding", tag: "NCLEX" },
    { text: "Document drainage and continue monitoring", tag: "SAFE_DELAY" },
    { text: "Increase IV fluids without notifying physician", tag: "STR" }
  ],
  correctTag: "SCFHS",
  rationale: {
    correct: "Massive post-op bleeding is life-threatening; rapid assessment and escalation are critical.",
    distractors: {
      NCLEX: "Clamping tubes can cause tension and worsen cardiac output.",
      SAFE_DELAY: "Documentation alone delays treatment.",
      STR: "Fluids without escalation are insufficient."
    }
  }
}
];

// ================= ENGINE =================
let shuffledQuestions = [];
let currentIndex = 0;
let selectedIndex = null;

let score = { SCFHS:0, NCLEX:0, STR:0, SAFE_DELAY:0 };

// ================= TIMER =================
let totalTime = 120 * 60; // 120 minutes
let timeLeft = totalTime;
let timerInterval = null;

function shuffle(arr) {
  return [...arr].sort(() => Math.random() - 0.5);
}

function startExam() {
  if (!candidateName.value.trim() || !candidateID.value.trim()) {
    alert("Enter Name and ID");
    return;
  }

  shuffledQuestions = shuffle(questions).map(q => ({
    ...q,
    options: shuffle(q.options)
  }));

  startScreen.classList.add("hidden");
  examScreen.classList.remove("hidden");

  startTimer();
  loadQuestion();
}

function loadQuestion() {
  selectedIndex = null;
  rationaleBox.classList.add("hidden");
  nextBtn.classList.add("hidden");

  const q = shuffledQuestions[currentIndex];
  qCounter.innerText = `Question ${currentIndex + 1} of ${shuffledQuestions.length}`;
  questionText.innerText = q.q;

  options.innerHTML = "";
  q.options.forEach((opt, i) => {
    const div = document.createElement("div");
    div.className = "option";
    div.innerText = opt.text;
    div.onclick = () => selectOption(div, i);
    options.appendChild(div);
  });
}

function selectOption(div, index) {
  document.querySelectorAll(".option").forEach(o => o.classList.remove("selected"));
  div.classList.add("selected");
  selectedIndex = index;
}

function submitAnswer() {
  if (selectedIndex === null) {
    alert("Select an option");
    return;
  }

  const q = shuffledQuestions[currentIndex];
  const chosen = q.options[selectedIndex];
  const isCorrect = chosen.tag === q.correctTag;

  score[chosen.tag]++;

  document.querySelectorAll(".option").forEach((o, i) => {
    if (q.options[i].tag === q.correctTag) o.classList.add("correct");
    if (i === selectedIndex && !isCorrect) o.classList.add("wrong");
  });

  rationaleBox.classList.remove("hidden");
  rationaleBox.innerHTML = isCorrect
    ? `<b>Correct.</b><br><br>${q.rationale.correct}`
    : `<b>Incorrect.</b><br><br>${q.rationale.distractors[chosen.tag]}
       <hr><b>Correct Rationale:</b><br>${q.rationale.correct}`;

  nextBtn.classList.remove("hidden");
}

function nextQuestion() {
  currentIndex++;
  currentIndex < shuffledQuestions.length ? loadQuestion() : showResult();
}

function startTimer() {
  updateTimer();
  timerInterval = setInterval(() => {
    timeLeft--;
    if (timeLeft <= 0) {
      clearInterval(timerInterval);
      autoEndExam();
    }
    updateTimer();
  }, 1000);
}

function updateTimer() {
  const min = Math.floor(timeLeft / 60);
  const sec = timeLeft % 60;
  timer.innerText = `Time Remaining: ${min}:${sec.toString().padStart(2,"0")}`;
}

function autoEndExam() {
  if (selectedIndex !== null) submitAnswer();
  setTimeout(showResult, 600);
}

function showResult() {
  clearInterval(timerInterval);

  examScreen.classList.add("hidden");
  resultScreen.classList.remove("hidden");

  const decision =
    score.SCFHS >= score.NCLEX && score.SCFHS >= score.STR
      ? "ðŸŸ¢ GO â€” SCFHS Ready"
      : "ðŸ”´ NO-GO â€” Not SCFHS Ready";

  finalReport.innerHTML = `
    <b>Decision:</b> ${decision}<br><br>
    <b>SCFHS Alignment:</b> ${score.SCFHS}<br>
    <b>NCLEX Bias:</b> ${score.NCLEX}<br>
    <b>STR Bias:</b> ${score.STR}<br><br>
    <b>Examiner Interpretation:</b><br>
    ${decision.includes("GO")
      ? "Consistent prioritization aligned with SCFHS Prometric expectations."
      : "Delayed or escalation-biased decision-making inconsistent with SCFHS standards."}
  `;
}
</script>

</body>
</html>
